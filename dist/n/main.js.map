{"version":3,"sources":["./src/environments/environment.ts","./src/app/_store/base.ts","./src/app/_api/http-interceptors/index.ts","./src/app/_guard/Permissions.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/_api/http-interceptors/noop-interceptor.ts","./src/app/app.module.ts","./src/_utils/storage.ts","./src/app/_store/user.ts","./src/app/app-routing.module.ts","./src/app/_api/user.ts","./src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { Router } from '@angular/router';\r\nimport { UserService } from '@api/user';\r\n\r\n// imports\r\nconst imports: {\r\n  userService?: UserService;\r\n  router?: Router;\r\n} = {};\r\n\r\nexport interface IAction {\r\n  [key: string]: (...arg: any[]) => any;\r\n}\r\n\r\nexport class Module<T> {\r\n\r\n  protected state: T;\r\n  private actionFunc: IAction;\r\n\r\n  constructor(state: T, action: IAction) {\r\n    this.state = state;\r\n    this.actionFunc = action;\r\n  }\r\n\r\n  public get action(): IAction {\r\n    return this.actionFunc;\r\n  }\r\n\r\n\r\n}\r\n\r\nexport const useUserService = (service: UserService) => {\r\n  imports.userService = service;\r\n};\r\n\r\nexport const useRouter = (r: Router) => {\r\n  imports.router = r;\r\n};\r\n\r\nexport const use = () => {\r\n  return imports;\r\n};\r\n","import { HTTP_INTERCEPTORS } from '@angular/common/http';\r\n\r\nimport { NoopInterceptor } from './noop-interceptor';\r\n\r\n/** Http interceptor providers in outside-in order */\r\nexport const httpInterceptorProviders = [\r\n  { provide: HTTP_INTERCEPTORS, useClass: NoopInterceptor, multi: true },\r\n];\r\n","import { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot, NavigationStart, CanActivateChild, UrlTree } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { userModule } from '@store/user';\r\n// 一定要加这个\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class LoginGuard implements CanActivate{\r\n\r\n  constructor( private router: Router) { }\r\n\r\n\r\n  canActivate(router: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {\r\n\r\n\r\n    console.log(router);\r\n    console.log(state);\r\n\r\n    if ( userModule.userID && userModule.tokenID ) {\r\n      return true;\r\n    } else {\r\n      this.router.navigateByUrl('/login');\r\n      return false;\r\n    }\r\n\r\n    // return loggedIn;\r\n  }\r\n\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\nimport { userModule } from '@store/user';\nimport { useUserService, useRouter } from '@store/base';\nimport { UserService } from '@api/user';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit {\n\n  constructor(userService: UserService, router: Router) {\n    // This is necessary for use store\n    useUserService(userService);\n    useRouter(router);\n  }\n\n  ngOnInit(): void {\n    userModule.action.init();\n  }\n}\n","<router-outlet></router-outlet>\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  HttpEvent, HttpInterceptor, HttpHandler, HttpRequest, HttpResponse\r\n} from '@angular/common/http';\r\n\r\nimport { Observable, of } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class NoopInterceptor implements HttpInterceptor {\r\n\r\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n\r\n    // 通过拦截器拦截 api/login 请求\r\n    if ( req.url === 'api/login' ) {\r\n      console.log('this is login');\r\n\r\n      // 自己提供数据\r\n      return of(new HttpResponse({\r\n        status: 200,\r\n        url: req.url,\r\n        body: {\r\n          msg: 'Hello',\r\n          success: true,\r\n          token: 'admin-token',\r\n          tokenID: 1\r\n        }\r\n      }));\r\n    } else {\r\n      return next.handle(req);\r\n    }\r\n  }\r\n}\r\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { registerLocaleData, CommonModule } from '@angular/common';\n\nimport zh from '@angular/common/locales/zh';\n\n\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\n\nimport { HttpClientModule } from '@angular/common/http';\nimport { httpInterceptorProviders } from '@api/http-interceptors/index';\n\n\nregisterLocaleData(zh);\n\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    AppRoutingModule,\n    CommonModule,\n    HttpClientModule,\n  ],\n  providers: [\n    // 拦截器\n    httpInterceptorProviders,\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { langType } from \"./lang\";\r\n\r\nconst BASE = 'ng-yubi-template';\r\n\r\nconst USERID_KEY = 'userid';\r\nconst USERTOKENID_KEY = 'user-tokenid';\r\nconst LOCAL_LANG_KEY = 'local-lang';\r\n\r\n\r\nexport const getUserID = () => localStorage.getItem(BASE + '-' + USERID_KEY);\r\nexport const setUserID  = (userID: string) => localStorage.setItem(BASE + '-' + USERID_KEY, userID);\r\nexport const removeUserID = () => localStorage.removeItem(BASE + '-' + USERID_KEY);\r\n\r\n\r\n// tslint:disable-next-line: radix\r\nexport const getUserTokenID = () => parseInt(localStorage.getItem(BASE + '-' + USERTOKENID_KEY) || '0');\r\nexport const setUserTokenID  = (tokenID: string) => localStorage.setItem(BASE + '-' + USERTOKENID_KEY, tokenID);\r\nexport const removeUserTokenID = () => localStorage.removeItem(BASE + '-' + USERTOKENID_KEY);\r\n\r\n\r\nexport const getLocalLang = (): langType => localStorage.getItem(BASE + '-' + LOCAL_LANG_KEY) as langType;\r\nexport const setLocalLang  = (lang: langType) => localStorage.setItem(BASE + '-' + LOCAL_LANG_KEY, lang);\r\nexport const removeLocalLang = () => localStorage.removeItem(BASE + '-' + LOCAL_LANG_KEY);\r\n","import { IAction, Module, use } from './base';\r\nimport { getUserID, getUserTokenID, removeUserID, removeUserTokenID, setUserID, setUserTokenID } from '@utils/storage';\r\n\r\nconst tool = use();\r\ninterface IUserState {\r\n  userID: string;\r\n  userPwd: string;\r\n  token: string;\r\n  tokenID: number;\r\n}\r\n\r\nconst userState: IUserState = {\r\n  userID: 'test',\r\n  userPwd: '',\r\n  token: 'g',\r\n  tokenID: 0\r\n};\r\n\r\nconst userAction: IAction = {\r\n  setUserID: (userID: string): void => {\r\n    userState.userID = userID;\r\n  },\r\n  login: (userID: string, passID: string, remember: boolean = false): boolean => {\r\n    let success = false;\r\n\r\n    tool.userService?.login(userID, passID).subscribe(\r\n      (res: any) => {\r\n        // tslint:disable-next-line: no-conditional-assignment\r\n        if ( success = res.success ) {\r\n          userAction.setUserID(userID);\r\n          userState.token = res.token;\r\n          userState.tokenID = res.tokenID;\r\n\r\n          if (remember) {\r\n            setUserID(userID);\r\n            setUserTokenID(res.tokenID);\r\n          }\r\n\r\n          tool.router?.navigateByUrl('/');\r\n        }\r\n      }\r\n    );\r\n    return success;\r\n  },\r\n  logout: () => {\r\n    removeUserID();\r\n    removeUserTokenID();\r\n    userState.userID = '';\r\n    userState.tokenID = 0;\r\n    tool.router?.navigateByUrl('/login');\r\n  },\r\n  init: () => {\r\n    userState.userID = getUserID() || '';\r\n    userState.tokenID = getUserTokenID() || 0;\r\n  }\r\n};\r\n\r\nclass UserModule extends Module<IUserState> {\r\n\r\n  constructor() {\r\n    super(userState, userAction);\r\n  }\r\n  public get userID(): string {\r\n    return this.state.userID;\r\n  }\r\n\r\n  public get userPwd(): string {\r\n    return this.state.userPwd;\r\n  }\r\n\r\n  public get tokenID(): number {\r\n    return this.state.tokenID;\r\n  }\r\n\r\n  public get token(): string {\r\n    return this.state.token;\r\n  }\r\n}\r\n\r\nexport const userModule = new UserModule();\r\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule, provideRoutes, Router } from '@angular/router';\nimport { LoginGuard } from './_guard/Permissions';\n\nconst routes: Routes = [\n  { path: '', pathMatch: 'full', redirectTo: 'pages' },\n  { path: 'pages', loadChildren: () => import('./pages/pages.module').then(m => m.PagesModule),  canActivate: [LoginGuard]},\n  { path: 'login', loadChildren: () => import('./others/login/login.module').then(m => m.LoginModule) },\n  { path: '**', loadChildren: () => import('./others/not-found/not-found.module').then(m => m.NotFoundModule) },\n];\n@NgModule({\n  imports: [RouterModule.forRoot(routes, {onSameUrlNavigation: 'reload'})],\n  exports: [RouterModule],\n  providers: [LoginGuard]\n})\nexport class AppRoutingModule { }\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\n\r\nimport { Observable, of } from 'rxjs';\r\nimport { catchError, map, tap } from 'rxjs/operators';\r\n\r\n\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class UserService {\r\n\r\n  private URL_LOGIN = 'api/login'; \r\n\r\n  httpOptions = {\r\n    headers: new HttpHeaders({ 'Content-Type': 'application/json' })\r\n  };\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n  ) { }\r\n\r\n  login(userID: string, passID: string): Observable<any> {\r\n    console.log('service');\r\n    return this.http.post<{userID: string, passID: string}>(\r\n      this.URL_LOGIN,\r\n      { userID, passID },\r\n      this.httpOptions).pipe(\r\n        // RxJS 的 tap() 操作符来实现，该操作符会查看 Observable 中的值，使用那些值做一些事情，并且把它们传出来。 这种 tap() 回调不会改变这些值本身。\r\n        tap((next) => {\r\n          console.log('next');\r\n          console.log(next);\r\n        }),\r\n        catchError(this.handleError('loginError', []))\r\n      );\r\n  }\r\n\r\n  private handleError<T>(operation = 'operation', result?: T): any {\r\n    return (error: any): Observable<T> => {\r\n\r\n      console.error(error); // log to console instead\r\n\r\n      console.log(`${operation} failed: ${error.message}`);\r\n\r\n      return of(result as T);\r\n    };\r\n  }\r\n}\r\n\r\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\n\nimport '@angular/compiler';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}